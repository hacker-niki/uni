@model WEB_253505.Domain.Models.ListModel<Product>
@{
    var request = ViewContext.HttpContext.Request;
    var returnUrl = request.Path + request.QueryString.ToUriComponent();
    ViewBag.Title = "Index";

    var categories = ViewData["Categories"] as List<Category> ?? new List<Category>();

    string? currentCategory = request.Query["category"].ToString();
    int prev = Model.CurrentPage == 1
        ? 1
        : Model.CurrentPage - 1;
    int next = Model.CurrentPage == Model.TotalPages
        ? Model.TotalPages
        : Model.CurrentPage + 1;
}

<div class="container" id = "page">
    <div class="dropdown mb-4">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu" data-bs-toggle="dropdown" aria-expanded="false">
            @ViewData["CategoryName"]
        </button>

        <ul class="dropdown-menu" aria-labelledby="dropdownMenu">
            @foreach (var category in (ViewData["Categories"] as List<Category>)!)
            {
                <li>
                    @Html.ActionLink(category.Name, "Index", "Product", new { category = category.Id }, new { @class = "dropdown-item" })
                    @* <a class="dropdown-item" asp-controller="Product" asp-action="Index">@categoy.Name</a> *@
                </li>
            }
        </ul>
    </div>

    @* <div class="row row-cols-1 row-cols-md-3"> *@
    @*     @foreach (var item in Model.Items) *@
    @*     { *@
    @*         <div class="col"> *@
    @*             <div class="card mb-3"> *@
    @*                 <img class="card-img-top" type="@item.MimeType" src="@(item.Image)" alt="@item.Name"/> *@
    @*                 <div class="card-body"> *@
    @*                     <h5 class="card-title">@Html.DisplayFor(modelItem => item.Name)</h5> *@
    @*                     <p class="card-text">@Html.DisplayFor(modelItem => item.Description)</p> *@
    @*                 </div> *@
    @*                 <div class="card-footer p-1"> *@
    @*                     <div class="row"> *@
    @*                         <div class="col ms-2"> *@
    @*                             <form asp-controller="Cart" asp-action="Add" method="post"> *@
    @*                                 <input type="hidden" name="returnUrl" value="@(returnUrl)"> *@
    @*                                 <input type="hidden" name="Id" value="@item.Id"> *@
    @*                                 <button type="submit" class="btn btn-outline-primary">В корзину <i class="fa fa-cart-plus"></i></button> *@
    @*                             </form> *@
    @*                         </div> *@
    @*                         <div class="col ms-auto align-content-center"> *@
    @*                             @Html.DisplayFor(modelItem => item.Price) *@
    @*                         </div> *@
    @*                     </div> *@
    @*                 </div> *@
    @*             </div> *@
    @*         </div> *@
    @*     } *@
    @* </div> *@

    <div class="col-10" id="catalog">
        @{
            await Html.RenderPartialAsync("_PaginationPartial", new
            {
                CurrentCategory = currentCategory,
                ReturnUrl = returnUrl,
                CurrentPage = Model.CurrentPage,
                TotalPages = Model.TotalPages,
                Products = Model.Items,
                Admin = false
            });
        }
    </div>
</div>